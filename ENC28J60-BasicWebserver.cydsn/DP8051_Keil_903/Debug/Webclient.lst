C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE WEBCLIENT
OBJECT MODULE PLACED IN .\DP8051_Keil_903\Debug\Webclient.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\2.1\PSoC Creator\import\keil\pk51\9.03\C51\BIN\c51.exe 
                    -.\Webclient.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051_Keil_903\Debug\Webclient.lst) CD DB NOIP OT(0,SIZE) INCDIR(Genera
                    -ted_Source\PSoC3) OJ(.\DP8051_Keil_903\Debug\Webclient.obj)

line level    source

   1          /*
   2           Network Stack for PSoC3-ENC28J60 hardware
   3           -----------------------------------------
   4           Title  : Webclient functions.
   5           Author : Kartik Mankad
   6           Date : 30-06-12
   7           This code is licensed as CC-BY-SA 3.0
   8           Description : Webserver client functionality that allows for basic requests/reply processing.
   9          */
  10          #include "IPStackMain.h"
  11          #include <string.h>
  12          
  13          
  14          unsigned int WebClient_ProcessReply(TCPhdr* Rpacket){
  15   1      
  16   1      return 1;
  17   1      }
*** WARNING C280 IN LINE 14 OF .\Webclient.c: 'Rpacket': unreferenced local variable
  18          
  19          unsigned int WebClient_BrowseURL(unsigned char* query,TCPhdr* Tpacket){
  20   1      
  21   1          unsigned int datlen;
  22   1          
  23   1          /*We have finished the handshake,so lets send the Actual Query*/
  24   1          Tpacket->PSH=1;
  25   1          Tpacket->ip.ident=0xABBA;
  26   1          
  27   1          /*Length of Query String*/
  28   1          datlen=strlen(query);
  29   1          
  30   1          /*Copy in the Query*/
  31   1          memcpy((unsigned char*)Tpacket+sizeof(TCPhdr),query,datlen);
  32   1          
  33   1          /*Set IP Length field*/
  34   1          Tpacket->ip.len=(sizeof(TCPhdr)+datlen)-sizeof(EtherNetII);
  35   1          
  36   1          /*Zero out the checksums*/
  37   1          Tpacket->ip.chksum=0x00;
  38   1          Tpacket->chksum=0x00;
  39   1          
  40   1          /*Compute the checksums*/
  41   1          Tpacket->ip.chksum=checksum((unsigned char*)Tpacket + sizeof(EtherNetII),sizeof(IPhdr)-sizeof(EtherNet
             -II),0);
  42   1          Tpacket->chksum = checksum((unsigned char*)Tpacket->ip.source,0x08+0x14+datlen,2);
  43   1          
  44   1          return(MACWrite((unsigned char*)Tpacket,sizeof(TCPhdr)+datlen));
  45   1      }
  46          
  47          
  48          unsigned int WebClient_Send(const char* Querydat){
  49   1          unsigned char packet[MAXPACKETLEN];
  50   1          static bit FuncCall;
  51   1          
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 2   

  52   1          /*Its a TCP Packet.*/
  53   1          TCPhdr* TCPacket = (TCPhdr*)packet;
  54   1          
  55   1          /*Check if Link is Up*/
  56   1          if(IsLinkUp()==0){
  57   2              return FALSE;
  58   2          }
  59   1          
  60   1          /*Till Previous Query wasnt fully processed,
  61   1          dont send another one,if so just return*/
  62   1          if(!((WebClientDataRecd!=2)&&(FuncCall==0))){
  63   2              return FALSE;
  64   2          }
  65   1         
  66   1          /*Take the URL into the Global URL*/
  67   1          if(sizeof(Querydat)<sizeof(WebClientQuery))  {
  68   2              /*We can accomodate it into our global query dat buffer*/
  69   2              memcpy(WebClientQuery,Querydat,sizeof(Querydat));
  70   2          }else{
  71   2              /*Its too big.*/
  72   2              return FALSE;
  73   2          }
  74   1          
  75   1          
  76   1          /*We'll send a SYN to initiate the Handshake.*/
  77   1          SetupBasicIPPacket( packet, TCPPROTOCOL, serverIP );
  78   1          
  79   1          TCPacket->sourcePort=WClientPort;
  80   1          TCPacket->destPort=80;
  81   1          
  82   1         // TCPacket->seqNo=0x00;
  83   1         // TCPacket->ackNo=0x00;
  84   1          
  85   1          TCPacket->hdrLen = (sizeof(TCPhdr)-sizeof(IPhdr))/4;
  86   1          TCPacket->SYN=1;
  87   1          
  88   1          /*Set Window size*/
  89   1          TCPacket->wndSize = 200;
  90   1          
  91   1          /*Set IP Length*/
  92   1          TCPacket->ip.len =sizeof(TCPhdr)-sizeof(EtherNetII);
  93   1          
  94   1          /*Compute the checksums*/
  95   1          TCPacket->ip.chksum=checksum((unsigned char*)TCPacket + sizeof(EtherNetII),sizeof(IPhdr)-sizeof(EtherN
             -etII),0);
  96   1          TCPacket->chksum = checksum((unsigned char*)TCPacket->ip.source,0x08+0x14,2);
  97   1          
  98   1          /*Send the SYN*/
  99   1          MACWrite((unsigned char*)TCPacket,sizeof(TCPhdr));
 100   1          
 101   1          FuncCall=1;
 102   1          
 103   1          return TRUE;
 104   1      }
 105          
 106          /* [] END OF FILE */
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _WebClient_ProcessReply (BEGIN)
                                           ; SOURCE LINE # 14
0000 900000      R     MOV     DPTR,#Rpacket
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 16
0006 7E00              MOV     R6,#00H
0008 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 17
000A         ?C0001:
000A 22                RET     
             ; FUNCTION _WebClient_ProcessReply (END)

             ; FUNCTION _WebClient_BrowseURL (BEGIN)
                                           ; SOURCE LINE # 19
0000 900000      R     MOV     DPTR,#query
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 24
0006 900000      R     MOV     DPTR,#Tpacket
0009 120000      E     LCALL   ?C?PLDXDATA
000C E9                MOV     A,R1
000D 242F              ADD     A,#02FH
000F F9                MOV     R1,A
0010 EA                MOV     A,R2
0011 3400              ADDC    A,#00H
0013 FA                MOV     R2,A
0014 120000      E     LCALL   ?C?CLDPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 4408              ORL     A,#08H
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 25
0020 900000      R     MOV     DPTR,#Tpacket
0023 120000      E     LCALL   ?C?PLDXDATA
0026 E9                MOV     A,R1
0027 2412              ADD     A,#012H
0029 F9                MOV     R1,A
002A EA                MOV     A,R2
002B 3400              ADDC    A,#00H
002D FA                MOV     R2,A
002E 74AB              MOV     A,#0ABH
0030 75F0BA            MOV     B,#0BAH
0033 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 28
0036 900000      R     MOV     DPTR,#query
0039 120000      E     LCALL   ?C?PLDXDATA
003C 120000      E     LCALL   _strlen
003F 900000      R     MOV     DPTR,#datlen
0042 EE                MOV     A,R6
0043 F0                MOVX    @DPTR,A
0044 A3                INC     DPTR
0045 EF                MOV     A,R7
0046 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 31
0047 900000      R     MOV     DPTR,#datlen
004A E0                MOVX    A,@DPTR
004B FE                MOV     R6,A
004C A3                INC     DPTR
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 4   

004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
004F 900000      R     MOV     DPTR,#query
0052 120000      E     LCALL   ?C?PLDXDATA
0055 C003              PUSH    AR3
0057 C002              PUSH    AR2
0059 C001              PUSH    AR1
005B 900000      R     MOV     DPTR,#Tpacket
005E 120000      E     LCALL   ?C?PLDXDATA
0061 E9                MOV     A,R1
0062 2436              ADD     A,#036H
0064 F9                MOV     R1,A
0065 EA                MOV     A,R2
0066 3400              ADDC    A,#00H
0068 FA                MOV     R2,A
0069 A801              MOV     R0,AR1
006B AC02              MOV     R4,AR2
006D AD03              MOV     R5,AR3
006F D001              POP     AR1
0071 D002              POP     AR2
0073 D003              POP     AR3
0075 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 34
0078 900000      R     MOV     DPTR,#datlen
007B E0                MOVX    A,@DPTR
007C FE                MOV     R6,A
007D A3                INC     DPTR
007E E0                MOVX    A,@DPTR
007F FF                MOV     R7,A
0080 EF                MOV     A,R7
0081 2428              ADD     A,#028H
0083 FF                MOV     R7,A
0084 EE                MOV     A,R6
0085 3400              ADDC    A,#00H
0087 FE                MOV     R6,A
0088 900000      R     MOV     DPTR,#Tpacket
008B 120000      E     LCALL   ?C?PLDXDATA
008E E9                MOV     A,R1
008F 2410              ADD     A,#010H
0091 F9                MOV     R1,A
0092 EA                MOV     A,R2
0093 3400              ADDC    A,#00H
0095 FA                MOV     R2,A
0096 EE                MOV     A,R6
0097 8FF0              MOV     B,R7
0099 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 37
009C 900000      R     MOV     DPTR,#Tpacket
009F 120000      E     LCALL   ?C?PLDXDATA
00A2 E9                MOV     A,R1
00A3 2418              ADD     A,#018H
00A5 F9                MOV     R1,A
00A6 EA                MOV     A,R2
00A7 3400              ADDC    A,#00H
00A9 FA                MOV     R2,A
00AA E4                CLR     A
00AB 75F000            MOV     B,#00H
00AE 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 38
00B1 900000      R     MOV     DPTR,#Tpacket
00B4 120000      E     LCALL   ?C?PLDXDATA
00B7 E9                MOV     A,R1
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 5   

00B8 2432              ADD     A,#032H
00BA F9                MOV     R1,A
00BB EA                MOV     A,R2
00BC 3400              ADDC    A,#00H
00BE FA                MOV     R2,A
00BF E4                CLR     A
00C0 75F000            MOV     B,#00H
00C3 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 41
00C6 900000      R     MOV     DPTR,#Tpacket
00C9 120000      E     LCALL   ?C?PLDXDATA
00CC E9                MOV     A,R1
00CD 240E              ADD     A,#0EH
00CF F9                MOV     R1,A
00D0 EA                MOV     A,R2
00D1 3400              ADDC    A,#00H
00D3 FA                MOV     R2,A
00D4 900000      E     MOV     DPTR,#?_checksum?BYTE+05H
00D7 E4                CLR     A
00D8 F0                MOVX    @DPTR,A
00D9 7D14              MOV     R5,#014H
00DB 7C00              MOV     R4,#00H
00DD 120000      E     LCALL   _checksum
00E0 900000      R     MOV     DPTR,#Tpacket
00E3 120000      E     LCALL   ?C?PLDXDATA
00E6 E9                MOV     A,R1
00E7 2418              ADD     A,#018H
00E9 F9                MOV     R1,A
00EA EA                MOV     A,R2
00EB 3400              ADDC    A,#00H
00ED FA                MOV     R2,A
00EE EE                MOV     A,R6
00EF 8FF0              MOV     B,R7
00F1 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 42
00F4 900000      R     MOV     DPTR,#Tpacket
00F7 120000      E     LCALL   ?C?PLDXDATA
00FA E9                MOV     A,R1
00FB 241A              ADD     A,#01AH
00FD F9                MOV     R1,A
00FE EA                MOV     A,R2
00FF 3400              ADDC    A,#00H
0101 FA                MOV     R2,A
0102 900000      R     MOV     DPTR,#datlen
0105 E0                MOVX    A,@DPTR
0106 FE                MOV     R6,A
0107 A3                INC     DPTR
0108 E0                MOVX    A,@DPTR
0109 FF                MOV     R7,A
010A EF                MOV     A,R7
010B 241C              ADD     A,#01CH
010D FD                MOV     R5,A
010E EE                MOV     A,R6
010F 3400              ADDC    A,#00H
0111 FC                MOV     R4,A
0112 900000      E     MOV     DPTR,#?_checksum?BYTE+05H
0115 7402              MOV     A,#02H
0117 F0                MOVX    @DPTR,A
0118 120000      E     LCALL   _checksum
011B 900000      R     MOV     DPTR,#Tpacket
011E 120000      E     LCALL   ?C?PLDXDATA
0121 E9                MOV     A,R1
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 6   

0122 2432              ADD     A,#032H
0124 F9                MOV     R1,A
0125 EA                MOV     A,R2
0126 3400              ADDC    A,#00H
0128 FA                MOV     R2,A
0129 EE                MOV     A,R6
012A 8FF0              MOV     B,R7
012C 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 44
012F 900000      R     MOV     DPTR,#Tpacket
0132 120000      E     LCALL   ?C?PLDXDATA
0135 900000      R     MOV     DPTR,#datlen
0138 E0                MOVX    A,@DPTR
0139 FE                MOV     R6,A
013A A3                INC     DPTR
013B E0                MOVX    A,@DPTR
013C FF                MOV     R7,A
013D EF                MOV     A,R7
013E 2436              ADD     A,#036H
0140 FD                MOV     R5,A
0141 EE                MOV     A,R6
0142 3400              ADDC    A,#00H
0144 FC                MOV     R4,A
0145 120000      E     LCALL   _MACWrite
0148 7E00              MOV     R6,#00H
                                           ; SOURCE LINE # 45
014A         ?C0002:
014A 22                RET     
             ; FUNCTION _WebClient_BrowseURL (END)

             ; FUNCTION _WebClient_Send (BEGIN)
                                           ; SOURCE LINE # 48
0000 900000      R     MOV     DPTR,#Querydat
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 53
0006 7B01              MOV     R3,#01H
0008 7A00        R     MOV     R2,#HIGH packet
000A 7900        R     MOV     R1,#LOW packet
000C 900000      R     MOV     DPTR,#TCPacket
000F 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 56
0012 120000      E     LCALL   IsLinkUp
0015 EF                MOV     A,R7
0016 7005              JNZ     ?C0003
                                           ; SOURCE LINE # 57
0018 7E00              MOV     R6,#00H
001A 7F01              MOV     R7,#01H
001C 22                RET     
                                           ; SOURCE LINE # 58
001D         ?C0003:
                                           ; SOURCE LINE # 62
001D 900000      E     MOV     DPTR,#WebClientDataRecd
0020 E0                MOVX    A,@DPTR
0021 FF                MOV     R7,A
0022 EF                MOV     A,R7
0023 6402              XRL     A,#02H
0025 6003              JZ      ?C0006
0027 300005            JNB     FuncCall,?C0005
002A         ?C0006:
                                           ; SOURCE LINE # 63
002A 7E00              MOV     R6,#00H
002C 7F01              MOV     R7,#01H
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 7   

002E 22                RET     
                                           ; SOURCE LINE # 64
002F         ?C0005:
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 69
002F 900000      R     MOV     DPTR,#Querydat
0032 120000      E     LCALL   ?C?PLDXDATA
0035 C003              PUSH    AR3
0037 C002              PUSH    AR2
0039 C001              PUSH    AR1
003B 7B01              MOV     R3,#01H
003D 7A00        E     MOV     R2,#HIGH WebClientQuery
003F 7900        E     MOV     R1,#LOW WebClientQuery
0041 A801              MOV     R0,AR1
0043 AC02              MOV     R4,AR2
0045 AD03              MOV     R5,AR3
0047 D001              POP     AR1
0049 D002              POP     AR2
004B D003              POP     AR3
004D 7E00              MOV     R6,#00H
004F 7F03              MOV     R7,#03H
0051 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 70
0054 8005              SJMP    ?C0008
0056         ?C0007:
                                           ; SOURCE LINE # 72
0056 7E00              MOV     R6,#00H
0058 7F01              MOV     R7,#01H
005A 22                RET     
                                           ; SOURCE LINE # 73
005B         ?C0008:
                                           ; SOURCE LINE # 77
005B 7B01              MOV     R3,#01H
005D 7A00        R     MOV     R2,#HIGH packet
005F 7900        R     MOV     R1,#LOW packet
0061 C003              PUSH    AR3
0063 C002              PUSH    AR2
0065 C001              PUSH    AR1
0067 7B01              MOV     R3,#01H
0069 7A00        E     MOV     R2,#HIGH serverIP
006B 7900        E     MOV     R1,#LOW serverIP
006D 900000      E     MOV     DPTR,#?_SetupBasicIPPacket?BYTE+04H
0070 120000      E     LCALL   ?C?PSTXDATA
0073 D001              POP     AR1
0075 D002              POP     AR2
0077 D003              POP     AR3
0079 7D06              MOV     R5,#06H
007B 120000      E     LCALL   _SetupBasicIPPacket
                                           ; SOURCE LINE # 79
007E 900000      E     MOV     DPTR,#WClientPort
0081 E0                MOVX    A,@DPTR
0082 FE                MOV     R6,A
0083 A3                INC     DPTR
0084 E0                MOVX    A,@DPTR
0085 FF                MOV     R7,A
0086 900000      R     MOV     DPTR,#TCPacket
0089 120000      E     LCALL   ?C?PLDXDATA
008C E9                MOV     A,R1
008D 2422              ADD     A,#022H
008F F9                MOV     R1,A
0090 EA                MOV     A,R2
0091 3400              ADDC    A,#00H
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 8   

0093 FA                MOV     R2,A
0094 EE                MOV     A,R6
0095 8FF0              MOV     B,R7
0097 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 80
009A 900000      R     MOV     DPTR,#TCPacket
009D 120000      E     LCALL   ?C?PLDXDATA
00A0 E9                MOV     A,R1
00A1 2424              ADD     A,#024H
00A3 F9                MOV     R1,A
00A4 EA                MOV     A,R2
00A5 3400              ADDC    A,#00H
00A7 FA                MOV     R2,A
00A8 E4                CLR     A
00A9 75F050            MOV     B,#050H
00AC 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 85
00AF 900000      R     MOV     DPTR,#TCPacket
00B2 120000      E     LCALL   ?C?PLDXDATA
00B5 E9                MOV     A,R1
00B6 242E              ADD     A,#02EH
00B8 F9                MOV     R1,A
00B9 EA                MOV     A,R2
00BA 3400              ADDC    A,#00H
00BC FA                MOV     R2,A
00BD 120000      E     LCALL   ?C?CLDPTR
00C0 FF                MOV     R7,A
00C1 EF                MOV     A,R7
00C2 540F              ANL     A,#0FH
00C4 FF                MOV     R7,A
00C5 EF                MOV     A,R7
00C6 4450              ORL     A,#050H
00C8 FF                MOV     R7,A
00C9 EF                MOV     A,R7
00CA 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 86
00CD 900000      R     MOV     DPTR,#TCPacket
00D0 120000      E     LCALL   ?C?PLDXDATA
00D3 E9                MOV     A,R1
00D4 242F              ADD     A,#02FH
00D6 F9                MOV     R1,A
00D7 EA                MOV     A,R2
00D8 3400              ADDC    A,#00H
00DA FA                MOV     R2,A
00DB 120000      E     LCALL   ?C?CLDPTR
00DE FF                MOV     R7,A
00DF EF                MOV     A,R7
00E0 4402              ORL     A,#02H
00E2 FF                MOV     R7,A
00E3 EF                MOV     A,R7
00E4 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 89
00E7 900000      R     MOV     DPTR,#TCPacket
00EA 120000      E     LCALL   ?C?PLDXDATA
00ED E9                MOV     A,R1
00EE 2430              ADD     A,#030H
00F0 F9                MOV     R1,A
00F1 EA                MOV     A,R2
00F2 3400              ADDC    A,#00H
00F4 FA                MOV     R2,A
00F5 E4                CLR     A
00F6 75F0C8            MOV     B,#0C8H
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 9   

00F9 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 92
00FC 900000      R     MOV     DPTR,#TCPacket
00FF 120000      E     LCALL   ?C?PLDXDATA
0102 E9                MOV     A,R1
0103 2410              ADD     A,#010H
0105 F9                MOV     R1,A
0106 EA                MOV     A,R2
0107 3400              ADDC    A,#00H
0109 FA                MOV     R2,A
010A E4                CLR     A
010B 75F028            MOV     B,#028H
010E 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 95
0111 900000      R     MOV     DPTR,#TCPacket
0114 120000      E     LCALL   ?C?PLDXDATA
0117 E9                MOV     A,R1
0118 240E              ADD     A,#0EH
011A F9                MOV     R1,A
011B EA                MOV     A,R2
011C 3400              ADDC    A,#00H
011E FA                MOV     R2,A
011F 900000      E     MOV     DPTR,#?_checksum?BYTE+05H
0122 E4                CLR     A
0123 F0                MOVX    @DPTR,A
0124 7D14              MOV     R5,#014H
0126 7C00              MOV     R4,#00H
0128 120000      E     LCALL   _checksum
012B 900000      R     MOV     DPTR,#TCPacket
012E 120000      E     LCALL   ?C?PLDXDATA
0131 E9                MOV     A,R1
0132 2418              ADD     A,#018H
0134 F9                MOV     R1,A
0135 EA                MOV     A,R2
0136 3400              ADDC    A,#00H
0138 FA                MOV     R2,A
0139 EE                MOV     A,R6
013A 8FF0              MOV     B,R7
013C 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 96
013F 900000      R     MOV     DPTR,#TCPacket
0142 120000      E     LCALL   ?C?PLDXDATA
0145 E9                MOV     A,R1
0146 241A              ADD     A,#01AH
0148 F9                MOV     R1,A
0149 EA                MOV     A,R2
014A 3400              ADDC    A,#00H
014C FA                MOV     R2,A
014D 900000      E     MOV     DPTR,#?_checksum?BYTE+05H
0150 7402              MOV     A,#02H
0152 F0                MOVX    @DPTR,A
0153 7D1C              MOV     R5,#01CH
0155 7C00              MOV     R4,#00H
0157 120000      E     LCALL   _checksum
015A 900000      R     MOV     DPTR,#TCPacket
015D 120000      E     LCALL   ?C?PLDXDATA
0160 E9                MOV     A,R1
0161 2432              ADD     A,#032H
0163 F9                MOV     R1,A
0164 EA                MOV     A,R2
0165 3400              ADDC    A,#00H
0167 FA                MOV     R2,A
C51 COMPILER V9.03   WEBCLIENT                                                             07/02/2012 20:05:51 PAGE 10  

0168 EE                MOV     A,R6
0169 8FF0              MOV     B,R7
016B 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 99
016E 900000      R     MOV     DPTR,#TCPacket
0171 120000      E     LCALL   ?C?PLDXDATA
0174 7D36              MOV     R5,#036H
0176 7C00              MOV     R4,#00H
0178 120000      E     LCALL   _MACWrite
                                           ; SOURCE LINE # 101
017B D200        R     SETB    FuncCall
                                           ; SOURCE LINE # 103
017D E4                CLR     A
017E 7E00              MOV     R6,#00H
0180 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 104
0182         ?C0004:
0182 22                RET     
             ; FUNCTION _WebClient_Send (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    729    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    317    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
